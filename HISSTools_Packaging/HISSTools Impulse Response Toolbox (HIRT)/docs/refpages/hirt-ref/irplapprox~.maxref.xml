<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<?xml-stylesheet href="./_c74_ref.xsl" type="text/xsl"?>

<!--This file has been automatically generated by Doctor Max. DO NOT EDIT THIS FILE DIRECTLY.-->

<c74object name="irplapprox~" module="hirt">

	<digest>
		Approximate the frequency response of an IR with a set of freq/dB pairs
	</digest>

	<description>
		<o>irplapprox~</o> approximates an IR with a set of freq/dB pairs appropriate for use with <o>iruser~</o> or as deconvolution filter specifications (potentially with additional post-processing for auto-regularisation schemes and similar). The technique employed is piecewise linear approximation
		(PLA) in the log-log domain (log frequency / dB).
	</description>

	<!--METADATA-->
	<metadatalist>
		<metadata name="author">Alex Harker</metadata>
		<metadata name="tag">HIRT</metadata>
		<metadata name="tag">HIRT Objects</metadata>
		<metadata name="tag">HIRT Impulse Response</metadata>
		<metadata name="tag">MSP Filters</metadata>
	</metadatalist>

	<!--INLETS-->
	<inletlist>
		<inlet id="0" type="INLET_TYPE">
			<digest>
				Instructions to <o>irplapprox~</o>
			</digest>
			<description>
				<m>approx</m>
			</description>
		</inlet>
	</inletlist>

	<!--OUTLETS-->
	<outletlist>
		<outlet id="0" type="INLET_TYPE">
			<digest>
				An approximation of the input buffer IR. <br />
			</digest>
			<description>
				A list of floating point numbers representing an approximation of the input IR. <br />
				For use with the <m>iruser~</m> object or as deconvolution filter specifications.
			</description>
		</outlet>
	</outletlist>

	<!--ARGUMENTS-->
	<objarglist>
		<objarg name="NONE" optional="0" type="none">
			<digest>
				No arguments for <o>irplapprox~</o>
			</digest>
			<description>
			</description>
		</objarg>
	</objarglist>

	<!--MESSAGES-->
	<methodlist>
		<method name="approx">
			<arg name="buffer_name" optional="0" type="symbol" />
			<digest>
				Calculate approximation (on given input buffer)
			</digest>
			<description>
				Syntax: <b>approx <m>&lt;symbol: buffer_name&gt;</m> </b><br />				<br />
				Calculate approximation (on given input buffer). N.B. !! Calculation May Take Some Time !! <br />
				Set number of segments and smoothing with appropriate attributes. <br />
			</description>
		</method>
	</methodlist>

	<!--ATTRIBUTES-->
	<attributelist>
		<attribute name="normmode" get="1" set="1" type="int" size="1">
			<digest>
				Normalise Mode
			</digest>
			<description>
				When <m>normmode</m> is <b>on</b>, the <b>dB</b> levels of the output are normalised so that the maximum value is <b>0 dB</b>. Otherwise the <b>dB</b> levels are left unaffected.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Normalise Mode" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="onoff" />
			</attributelist>
		</attribute>
		<attribute name="readchan" get="1" set="1" type="int" size="1">
			<digest>
				Buffer Read Channel
			</digest>
			<description>
				Sets the channel number for <o>buffer~</o> reading (1-4). If the specified channel does not exist the value is wrapped within the existing number of channels (so 3 will read from channel 1 of a two-channel <o>buffer~</o>, 4 from channel 2). <br />
				<b>units: int, default: 1, range: 1..4</b>
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Buffer Read Channel" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="segments" get="1" set="1" type="int" size="1">
			<digest>
				Target Number of Segments
			</digest>
			<description>
				Sets the number of segments to reduce to and output. The smaller the number, the more approximate the amplitude response. However, larger numbers require a longer calculation time. <br />
				The PLA process is iterative and the more iterations the smaller the output. So more iterations mean longer processing times and smaller output.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Target Number of Segments" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="smoothamount" get="1" set="1" type="float_array" size="0">
			<digest>
				Smoothing Amounts
			</digest>
			<description>
				The spectral smoothing can change in linear width as the centre frequency changes. Typically, it makes sense to smooth more at high frequencies and less at low ones (corresponding to human perception). <br />
				The smoothing amounts set the smoothing widths in normalised linear frequency (where <b>0</b> is <b>0 Hz</b> and <b>0.5</b> is the <b>nyquist</b> frequency). <br />
				If one value only is given then the width of the smoothing window at <b>0 Hz</b> will be <b>0 Hz</b> and the width of the window at <b>nyquist</b> frequency will be the value given (with linear interpolation of widths inbetween). <br />
				If two values are given these are the window widths at <b>0 Hz</b> and the <b>nyquist</b> frequency respectively (with linear interpolation of widths inbetween). No values switches smoothing off. <br />
				<b>units: none, float/list, default: 0</b>
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Smoothing Amounts" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="smoothmode" get="1" set="1" type="int" size="1">
			<digest>
				Smoothing Mode
			</digest>
			<description>
				High-quality smoothing offers a higher quality result (especially on shorter signals), but is very CPU-intensive, so calculation times can be quite long, even impractically so. <br />
				The fast mode is significantly faster (as it computes in linear time) and sufficiently accurate for many purposes. Thus, this is the default mode for the <m>irplapprox~</m> and <m>irreference~</m> objects. <br />
				If you change this you can expect very long wait times! <br />
				<b>units: flag, default: 0, range: 0/1</b>
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Smoothing Mode" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="enumindex" />
			</attributelist>
		</attribute>
	</attributelist>

	<!--DISCUSSION-->
	<discussion>
		Further Reading: <br />
		<br />
		Currently the PLA algorithm employed takes a bottom up approach. An explanation of this approach, as well as discussion and newer techniques may be found in: <br />
		<br />
		Keogh, E., Chu, S., Hart, D., and Pazzani, M. 2003. Segmenting time series: A survey and novel approach. Data mining in time series databases, 1–21 <br />
		<br />
	</discussion>

	<!--SEEALSO-->
	<seealsolist>
		<seealso name="iralign~" />
		<seealso name="iraverage~" />
		<seealso name="irextract~" />
		<seealso name="irinvert~" />
		<seealso name="irmeasure~" />
		<seealso name="irnonlin~" />
		<seealso name="irphase~" />
		<seealso name="irreference~" />
		<seealso name="irstats~" />
		<seealso name="irsweeps~" />
		<seealso name="irtransaural~" />
		<seealso name="irtrimnorm~" />
		<seealso name="iruser~" />
		<seealso name="irvalue~" />
		<seealso name="bufconvolve~" />
		<seealso name="bufresample~" />
		<seealso name="bufreverse~" />
		<seealso name="morphfilter~" />
		<seealso name="multiconvolve~" />
		<seealso name="spectrumdraw~" />
	</seealsolist>

	<misc name = "Input">
		<entry name ="Inlet 1 (messages)">
			<description>
				Instructions to <o>irplapprox~</o>.
				<m>approx</m>
			</description>
		</entry>
	</misc>

	<misc name = "Output">
		<entry name ="Outlet 1 (list)">
			<description>
				An approximation of the input buffer IR <br />.
				A list of floating point numbers representing an approximation of the input IR. For use with the <m>iruser~</m> object or as deconvolution filter specifications.
			</description>
		</entry>
	</misc>

	<misc name = "Discussion">
		<entry name ="More details">
			<description>
		Further Reading: <br />
		<br />
		Currently the PLA algorithm employed takes a bottom up approach. An explanation of this approach, as well as discussion and newer techniques may be found in: <br />
		<br />
		Keogh, E., Chu, S., Hart, D., and Pazzani, M. 2003. Segmenting time series: A survey and novel approach. Data mining in time series databases, 1–21 <br />
		<br />
			</description>
		</entry>
		<entry name ="Keywords">
			<description>
impulse response, buffer, convolution, filter, pla.
			</description>
		</entry>
	</misc>

</c74object>