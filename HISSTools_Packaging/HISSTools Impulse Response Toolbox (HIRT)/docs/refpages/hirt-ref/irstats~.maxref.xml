<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<?xml-stylesheet href="./_c74_ref.xsl" type="text/xsl"?>

<!--This file has been automatically generated by Doctor Max. DO NOT EDIT THIS FILE DIRECTLY.-->

<c74object name="irstats~" module="hirt">

	<digest>
		Calculate room acoustic parameters and measurements from an IR
	</digest>

	<description>
		Given an input IR the <o>irstats~</o> object will calculate estimates for room acoustic parameters such as reverb time, clarity and mixing time (the transition point between early and late reflections), as well as other parameters such as estimated overall gain, sample rate and buffer length. The
		statistics may be requested in any order, and internally the object tracks dependent and repeat calculations to avoiding unnecessary recalculations.
	</description>

	<!--METADATA-->
	<metadatalist>
		<metadata name="author">Alex Harker</metadata>
		<metadata name="tag">HIRT</metadata>
		<metadata name="tag">HIRT Objects</metadata>
		<metadata name="tag">HIRT Impulse Response</metadata>
		<metadata name="tag">HIRT Measurement</metadata>
	</metadatalist>

	<!--INLETS-->
	<inletlist>
		<inlet id="0" type="INLET_TYPE">
			<digest>
				The <m>stats</m> message to <o>irstats~</o> followed by arguments
			</digest>
			<description>
				The first argument to <m>stats</m> is the input buffer on which to operate. The following arguments, any number in any order, are symbols representing the desired statistics to return. Those symbols and their functionality are listed below: <br />
				<br />
				<b>t20</b> - T20 measure of reverb time (RT60) <br />
				<b>t30</b> - T30 measure of reverb time (RT60) <br />
				<b>edt</b> - Early Decay Time (RT50 estimated from first 10dB drop in IR) <br />
				<b>onset</b> - Estimated onset time (start of IR within buffer) <br />
				<b>directend</b> - Estimated end time of direct sound <br />
				<b>directexists</b> - <b>1</b> if IR is estimated to have a direct part (<b>0</b> otherwise) <br />
				<b>mixing</b> - Estimated mixing time (transitation from early to late reflections) <br />
				<b>center</b> - Center time measure (center of energy) <br />
				<b>clarity</b> - Clarity measure in <b>dB</b> (ratio of early to late energy) <br />
				<b>rms</b> - RMS of the buffer in <b>dB</b> <br />
				<b>peak</b> - Peak sample value in <b>dB</b> <br />
				<b>mixingrms</b> - RMS around the estimated mixing time in <b>dB</b> <br />
				<b>ned</b> - Average normalised echo density (<b>0..1</b>) <br />
				<b>gain</b> - Estimated overall gain resulting from convolving by the IR in <b>dB</b> <br />
				<b>maxgain</b> - Estimated maximum gain within any octave of the IR in <b>dB</b> <br />
				<b>length</b> - Length of <o>buffer~</o> <br />
				<b>sr</b> - Sample rate of <o>buffer~</o> in <b>Hz</b> <br />
				<br />
				N.B. - If the <m>timeinsamps</m> attribute is <b>on</b>, all <b>times</b> will be reported in <b>samples</b>. Otherwise, <b>times</b> are given in <b>milliseconds</b>.
			</description>
		</inlet>
	</inletlist>

	<!--OUTLETS-->
	<outletlist>
		<outlet id="0" type="INLET_TYPE">
			<digest>
				Outputs a list of results in the order in which they were requested
			</digest>
			<description>
			</description>
		</outlet>
	</outletlist>

	<!--ARGUMENTS-->
	<objarglist>
		<objarg name="NONE" optional="0" type="none">
			<digest>
				No arguments for <o>irstats~</o>
			</digest>
			<description>
			</description>
		</objarg>
	</objarglist>

	<!--MESSAGES-->
	<methodlist>
		<method name="stats">
			<arg name="t20" optional="1" type="symbol" />
			<arg name="t30" optional="1" type="symbol" />
			<arg name="edt" optional="1" type="symbol" />
			<arg name="onset" optional="1" type="symbol" />
			<arg name="directend" optional="1" type="symbol" />
			<arg name="directexists" optional="1" type="symbol" />
			<arg name="mixing" optional="1" type="symbol" />
			<arg name="center" optional="1" type="symbol" />
			<arg name="clarity" optional="1" type="symbol" />
			<arg name="rms" optional="1" type="symbol" />
			<arg name="freq_low" optional="1" type="int/float" />
			<arg name="freq_high" optional="1" type="int/float" />
			<arg name="time_multiplier" optional="0" type="float" />
			<arg name="buffer_name" optional="0" type="symbol" />
			<arg name="time_multiplier" optional="1" type="float" />
			<arg name="ir_length" optional="0" type="int" />
			<arg name="sample_rate" optional="0" type="int/float" />
			<digest>
				Calculate statistics of given input buffer
			</digest>
			<description>
				Syntax: <b>stats <m>[&lt;symbol: t20&gt;]</m> <m>[&lt;symbol: t30&gt;]</m> <m>[&lt;symbol: edt&gt;]</m> <m>[&lt;symbol: onset&gt;]</m> <m>[&lt;symbol: directend&gt;]</m> <m>[&lt;symbol: directexists&gt;]</m> <m>[&lt;symbol: mixing&gt;]</m> <m>[&lt;symbol: center&gt;]</m> <m>[&lt;symbol: clarity&gt;]</m> <m>[&lt;symbol: rms&gt;]</m> <m>[&lt;int/float: freq_low&gt;]</m> <m>[&lt;int/float: freq_high&gt;]</m> <m>&lt;float: time_multiplier&gt;</m> <m>&lt;symbol: buffer_name&gt;</m> <m>[&lt;float: time_multiplier&gt;]</m> <m>&lt;int: ir_length&gt;</m> <m>&lt;int/float: sample_rate&gt;</m> </b><br />				<br />
				The first argument to <m>stats</m> is the input buffer on which to operate. The following arguments, any number in any order, are symbols representing the desired statistics to return. Those symbols and their functionality are listed below: <br />
				<br />
				<b>t20</b> - T20 measure of reverb time (RT60) <br />
				<b>t30</b> - T30 measure of reverb time (RT60) <br />
				<b>edt</b> - Early Decay Time (RT50 estimated from first 10dB drop in IR) <br />
				<b>onset</b> - Estimated onset time (start of IR within buffer) <br />
				<b>directend</b> - Estimated end time of direct sound <br />
				<b>directexists</b> - <b>1</b> if IR is estimated to have a direct part (<b>0</b> otherwise) <br />
				<b>mixing</b> - Estimated mixing time (transitation from early to late reflections) <br />
				<b>center</b> - Center time measure (center of energy) <br />
				<b>clarity</b> - Clarity measure in <b>dB</b> (ratio of early to late energy) <br />
				<b>rms</b> - RMS of the buffer in <b>dB</b> <br />
				<b>peak</b> - Peak sample value in <b>dB</b> <br />
				<b>mixingrms</b> - RMS around the estimated mixing time in <b>dB</b> <br />
				<b>ned</b> - Average normalised echo density (<b>0..1</b>) <br />
				<b>gain</b> - Estimated overall gain resulting from convolving by the IR in <b>dB</b> <br />
				<b>maxgain</b> - Estimated maximum gain within any octave of the IR in <b>dB</b> <br />
				<b>length</b> - Length of <o>buffer~</o> <br />
				<b>sr</b> - Sample rate of <o>buffer~</o> in <b>Hz</b> <br />
				<br />
				N.B. - If the <m>timeinsamps</m> attribute is <b>on</b>, all <b>times</b> will be reported in <b>samples</b>. Otherwise, <b>times</b> are given in <b>milliseconds</b>. <br />
			</description>
		</method>
	</methodlist>

	<!--ATTRIBUTES-->
	<attributelist>
		<attribute name="clipmixing" get="1" set="1" type="float_array" size="0">
			<digest>
				Clip Mixing Time
			</digest>
			<description>
				The mixing time can be restricted to return only sensible values. If only one value is given it is a minimum value. If two are given they are minimum and maximum values respectively. <br />
				The values are interpreted as representing milliseconds if <m>timeinsampes</m> is off, otherwise samples.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Clip Mixing Time" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="readchan" get="1" set="1" type="int" size="1">
			<digest>
				Buffer Read Channel
			</digest>
			<description>
				Sets the channel number for <o>buffer~</o> reading (1-4). If the specified channel does not exist the value is wrapped within the existing number of channels (so 3 will read from channel 1 of a two-channel <o>buffer~</o>, 4 from channel 2). <br />
				<b>units: int, default: 1, range: 1..4</b>
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Buffer Read Channel" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="timeinsamps" get="1" set="1" type="int" size="1">
			<digest>
				Times in Samples
			</digest>
			<description>
				When the <m>timeinsamps</m> attribute is <b>on</b>, all times will be reported in samples. Otherwise, times are given in milliseconds.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Times in Samples" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="onoff" />
			</attributelist>
		</attribute>
	</attributelist>

	<!--DISCUSSION-->
	<discussion>
		Further Reading: <br />
		<br />
		T20 / T30 / EDT / Center / Clarity: <br />
		<br />
		A. Gade, “Acoustics in halls for speech and music,”
		Springer Handbook of Acoustics, ISBN 978-0-387- 30446-5. Springer-Verlag New York, 2007, p. 301, vol. 1, p. 301, 2007 <br />
		<br />
		Mixing Time / NED: <br />
		<br />
		Abel, J.S. and Huang, P., 'A simple, robust measure of reverberation echo density' in the Proceedings of the 121st AES Convention, 2006 <br />
		<br />
	</discussion>

	<!--SEEALSO-->
	<seealsolist>
		<seealso name="iralign~" />
		<seealso name="iraverage~" />
		<seealso name="irextract~" />
		<seealso name="irinvert~" />
		<seealso name="irmeasure~" />
		<seealso name="irnonlin~" />
		<seealso name="irphase~" />
		<seealso name="irplapprox~" />
		<seealso name="irreference~" />
		<seealso name="irsweeps~" />
		<seealso name="irtransaural~" />
		<seealso name="irtrimnorm~" />
		<seealso name="iruser~" />
		<seealso name="irvalue~" />
		<seealso name="bufconvolve~" />
		<seealso name="bufresample~" />
		<seealso name="bufreverse~" />
		<seealso name="morphfilter~" />
		<seealso name="multiconvolve~" />
		<seealso name="spectrumdraw~" />
        <seealso name="hirttutorials" type="tutorial" module="hirt" />
	</seealsolist>

	<misc name = "Input">
		<entry name ="Inlet 1 (messages)">
			<description>
				The <m>stats</m> message to <o>irstats~</o> followed by arguments.
				The first argument to <m>stats</m> is the input buffer on which to operate. The following arguments, any number in any order, are symbols representing the desired statistics to return. Those symbols and their functionality are listed below: <br />
				<br />
				<b>t20</b> - T20 measure of reverb time (RT60) <br />
				<b>t30</b> - T30 measure of reverb time (RT60) <br />
				<b>edt</b> - Early Decay Time (RT50 estimated from first 10dB drop in IR) <br />
				<b>onset</b> - Estimated onset time (start of IR within buffer) <br />
				<b>directend</b> - Estimated end time of direct sound <br />
				<b>directexists</b> - <b>1</b> if IR is estimated to have a direct part (<b>0</b> otherwise) <br />
				<b>mixing</b> - Estimated mixing time (transitation from early to late reflections) <br />
				<b>center</b> - Center time measure (center of energy) <br />
				<b>clarity</b> - Clarity measure in <b>dB</b> (ratio of early to late energy) <br />
				<b>rms</b> - RMS of the buffer in <b>dB</b> <br />
				<b>peak</b> - Peak sample value in <b>dB</b> <br />
				<b>mixingrms</b> - RMS around the estimated mixing time in <b>dB</b> <br />
				<b>ned</b> - Average normalised echo density (<b>0..1</b>) <br />
				<b>gain</b> - Estimated overall gain resulting from convolving by the IR in <b>dB</b> <br />
				<b>maxgain</b> - Estimated maximum gain within any octave of the IR in <b>dB</b> <br />
				<b>length</b> - Length of <o>buffer~</o> <br />
				<b>sr</b> - Sample rate of <o>buffer~</o> in <b>Hz</b> <br />
				<br />
				N.B. - If the <m>timeinsamps</m> attribute is <b>on</b>, all <b>times</b> will be reported in <b>samples</b>. Otherwise, <b>times</b> are given in <b>milliseconds</b>.
			</description>
		</entry>
	</misc>

	<misc name = "Output">
		<entry name ="Outlet 1 (list)">
			<description>
				Outputs a list of results in the order in which they were requested.
			</description>
		</entry>
	</misc>

	<misc name = "Discussion">
		<entry name ="More details">
			<description>
		Further Reading: <br />
		<br />
		T20 / T30 / EDT / Center / Clarity: <br />
		<br />
		A. Gade, “Acoustics in halls for speech and music,”
		Springer Handbook of Acoustics, ISBN 978-0-387- 30446-5. Springer-Verlag New York, 2007, p. 301, vol. 1, p. 301, 2007 <br />
		<br />
		Mixing Time / NED: <br />
		<br />
		Abel, J.S. and Huang, P., 'A simple, robust measure of reverberation echo density' in the Proceedings of the 121st AES Convention, 2006 <br />
		<br />
			</description>
		</entry>
		<entry name ="Keywords">
			<description>
impulse response, buffer, estimate, room acoustic, reverb time, clarity, mixing time, early reflections, late reflections.
			</description>
		</entry>
	</misc>

</c74object>