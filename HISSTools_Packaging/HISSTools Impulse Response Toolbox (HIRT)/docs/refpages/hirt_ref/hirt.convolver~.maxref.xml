<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<?xml-stylesheet href="./_c74_ref.xsl" type="text/xsl"?>

<!--This file has been sort of automatically generated by Doctor Max. DO NOT EDIT THIS FILE DIRECTLY.-->

<c74object name="hirt.convolver~" module="hirt" kind="patcher">

	<digest>
		The HIRT Convolver for Max
	</digest>

	<description>
		The HIRT Convolver offers high-quality convolution using Impulse Responses. Drop an impulse (or a single channel of a true stereo impulse stored as two stereo files) to load it into the convolution engine. Offline control is offered over the decay time and size of the virtual image. The width o
		f the convolved image and levels can be controlled in realtime. The Convolver also features a realtime predelay time for using it as a reverb engine, and a realtime routable EQ with Saturation options for sonic shaping. The abstraction is a good example of advanced use of the HIRT externals collection.
	</description>

	<!--METADATA-->
	<metadatalist>
		<metadata name="author">Alex Harker</metadata>
		<metadata name="tag">HIRT</metadata>
		<metadata name="tag">HIRT Abstractions</metadata>
		<metadata name="tag">HIRT Convolution</metadata>
		<metadata name="tag">HIRT Reverb</metadata>
		<metadata name="tag">MSP Effects</metadata>
	</metadatalist>

	<!--INLETS-->
	<inletlist>
		<inlet id="0" type="INLET_TYPE">
			<digest>
				Left Audio input (and messages)
			</digest>
			<description>
				Left Audio Signal to be convolved / Messages to <o>hirt.convolver~</o>
			</description>
		</inlet>
		<inlet id="1" type="INLET_TYPE">
			<digest>
				Right Audio input (and messages)
			</digest>
			<description>
				Right Audio Signal to be convolved / Messages to <o>hirt.convolver~</o>
			</description>
		</inlet>
	</inletlist>

	<!--OUTLETS-->
	<outletlist>
		<outlet id="0" type="INLET_TYPE">
			<digest>
				The Left convolved signal output
			</digest>
			<description>
			</description>
		</outlet>
		<outlet id="1" type="INLET_TYPE">
			<digest>
				The Right convolved signal output
			</digest>
			<description>
			</description>
		</outlet>
		<outlet id="2" type="INLET_TYPE">
			<digest>
				Multiple messages, corresponding to the various input and attribute messages above
			</digest>
			<description>
				A direct feed from the dumpout of the internal <o>pattrstorage</o> object. Any internal parameter can be queried and returned here, as well as current state and storage data.
			</description>
		</outlet>
	</outletlist>

	<!--ARGUMENTS-->
	<objarglist>
		<objarg name="convolvername" optional="1" type="symbol">
			<digest>
				Set the name of this instance of the convolver
			</digest>
			<description>
				Setting the name is optional. If set, the name will be displayed in the convolver User Interface. Setting the name enables remote control of any internal parameter of <o>hirt.convolver~</o> using messages to Max. <br />
				The name is also given to the <m>globalpatchername</m> attribute of the abstraction enabling targeting by custom <o>pattr</o> systems. (For addressing multiple instances simultaneously one can use the special global namespace <m>hirt.convolver</m>). <br />
				Remote control can only address convolver parameters, not the internal <o>pattrstorage</o> (for <o>pattrstorage</o> targeting use inlets). <br />
			</description>
		</objarg>
	</objarglist>

	<!--MESSAGES-->
	<methodlist>
		<method name="anything">
			<arglist />
			<digest>
				Messages to pattrstorage
			</digest>
			<description>
				The abstraction also accepts any message to <o>pattrstorage</o> for setting, querying and dealing with storage options. All pattrstorage messages can be used, and all attributes can be used apart from <m>greedy</m>, <m>notifymode</m> &amp; <m>parameter_enable</m>. <br />
			</description>
		</method>
		<method name="close">
			<arglist />
			<digest>
				Close UI Window
			</digest>
			<description>
				The symbol <m>close</m> (or <m>wclose</m>) will cause the currently open UI editor window to close. <br />
			</description>
		</method>
		<method name="iradd">
			<arglist />
			<digest>
				Add a new IR file
			</digest>
			<description>
				The symbol <m>iradd</m> alone causes a file browser window to open for selecting a new impulse response file for loading into the convolution engine. Adding an IR with this message is identical to drag &amp; drop in the interface or using the <m>file</m> attribute. <br />
			</description>
		</method>
		<method name="irfolder">
			<arg name="index" optional="0" type="int" />
			<digest>
				Address folder menu by integer index
			</digest>
			<description>
				Syntax: <b>irfolder <m>&lt;int: index&gt;</m> </b><br />				<br />
				The IR library is arranged into folders in the HIRT Package. The IR menu below it shows items in the selected folder. If a sample is dropped onto the wave display (or using <m>iradd</m>), the folder where that sample came from is added to the bottom of this folder menu.
				With the <m>irfolder</m> message one can address the menu items in the folder menu by zero-indexed integer. <br />
				The current state of the menu can only be infered from the user interface, but the initial items will always be constant (the factory folders). <br />
				See also the <m>file</m> attribute. <br />
			</description>
		</method>
		<method name="irmenu">
			<arg name="index" optional="0" type="int" />
			<digest>
				Address IR menu by integer index
			</digest>
			<description>
				Syntax: <b>irmenu <m>&lt;int: index&gt;</m> </b><br />				<br />
				Select an IR from the list in the current folder. With the <m>irmenu</m> message one can address the menu items in the IR menu by zero-indexed integer. <br />
				The current state of the menu can be infered from the user interface, but for the factory content these are constants. <br />
				See also the <m>file</m> attribute. <br />
			</description>
		</method>
		<method name="open">
			<arglist />
			<digest>
				Open UI Window
			</digest>
			<description>
				The symbol <m>open</m> (or <m>front</m>) will cause the UI editor window to open. <br />
			</description>
		</method>
		<method name="signal">
			<arglist />
			<digest>
				In either inlet: The Audio signals to be convolved
			</digest>
			<description>
				In the Left inlet: The Left signal to be convolved. In the Right inlet: The Right signal to be convolved. <br />
			</description>
		</method>
	</methodlist>

	<!--ATTRIBUTES-->
	<attributelist>
		<attribute name="decay" get="1" set="1" type="float" size="1">
			<digest>
				Decay percent of IR
			</digest>
			<description>
				Offline. Internally generates a new IR with an envelope to increase or decrease the decay time in percent. This can be used for example to create a room out of a hall or to extend the length of the tail.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Decay percent of IR" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="drywet" get="1" set="1" type="float" size="1">
			<digest>
				Dry/Wet mix
			</digest>
			<description>
				Adjusts the balance between the input signal (dry) and the processed signal (wet). Set this to <b>100</b> percent when the reverb is used like a return track insert.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Dry/Wet mix" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="eq" get="1" set="1" type="int" size="1">
			<digest>
				EQ section on/off and routing
			</digest>
			<description>
				EQ Off/On - Choose routing of EQ in DSP chain. <br />
				OFF (<b>0</b>) - no EQ, also CPU disables this section. <br />
				PRE (<b>1</b>) - pre early convolution signal. <br />
				POST (<b>2</b>) - post late convolution signal. <br />
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="EQ section on/off and routing" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="eqfreq1" get="1" set="1" type="float" size="1">
			<digest>
				Low EQ frequency in Hz
			</digest>
			<description>
				Sets the center frequency of the Lowshelf filter.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Low EQ frequency in Hz" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="eqfreq2" get="1" set="1" type="float" size="1">
			<digest>
				Mid EQ frequency in Hz
			</digest>
			<description>
				Sets the center frequency of the Bell filter.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Mid EQ frequency in Hz" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="eqfreq3" get="1" set="1" type="float" size="1">
			<digest>
				High EQ frequency in Hz
			</digest>
			<description>
				Sets the center frequency of the Highshelf filter.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="High EQ frequency in Hz" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="eqgain1" get="1" set="1" type="float" size="1">
			<digest>
				Low EQ boost or attenuation
			</digest>
			<description>
				Adjusts the amount of boost or attenuation of the Lowshelf filter. Rolling-off low frequencies can prevent muddy reverb.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Low EQ boost or attenuation" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="eqgain2" get="1" set="1" type="float" size="1">
			<digest>
				Mid EQ boost or attenuation
			</digest>
			<description>
				Adjusts the amount of boost or attenuation of the Bell Filter.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Mid EQ boost or attenuation" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="eqgain3" get="1" set="1" type="float" size="1">
			<digest>
				High EQ boost or attenuation
			</digest>
			<description>
				Adjusts the amount of boost or attenuation of the Highshelf filter. Adjusting the Highshelf gain can make the reverb brighter or duller.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="High EQ boost or attenuation" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="eqq2" get="1" set="1" type="float" size="1">
			<digest>
				Mid EQ Q
			</digest>
			<description>
				Adjusts the Bandwidth of the Bell filter. Moderate to lower settings sound more natural.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Mid EQ Q" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="eqslope1" get="1" set="1" type="float" size="1">
			<digest>
				Low EQ slope
			</digest>
			<description>
				Adjusts the Slope of the Lowshelf filter. Moderate to lower settings sound more natural.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Low EQ slope" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="eqslope3" get="1" set="1" type="float" size="1">
			<digest>
				High EQ slope
			</digest>
			<description>
				Adjusts the Resonance of the Highshelf filter. Moderate to lower settings sound more natural.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="High EQ slope" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="file" get="1" set="1" type="symbol" size="1">
			<digest>
				Load IR File
			</digest>
			<description>
				Load a new IR file by file name (if file present in your search path) or by file path/name (if file outside your search path).
				Must be a symbol, so use "quotes" if there are spaces.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Load IR File" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="gain" get="1" set="1" type="float" size="1">
			<digest>
				Wet gain in dB
			</digest>
			<description>
				Adjust the output volume of the wet portion of the mix.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Wet gain in dB" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="predelay" get="1" set="1" type="float" size="1">
			<digest>
				Pre early reflection delay time onset
			</digest>
			<description>
				Useful if using the <o>hirt.convolver~</o> as a reverb. Controls the delay time, in milliseconds, before the onset of the first early reflection. <br />
				One's impression of the distance from any walls, e.g. the size of a room, depends partially on this delay. Typical values for natural sounds range from <b>1</b>ms to <b>25</b>ms.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Pre early reflection delay time onset" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="saturation" get="1" set="1" type="int" size="1">
			<digest>
				EQ Saturation Type
			</digest>
			<description>
				Choose Saturation algorithm. <br />
				'Off' (<b>0</b>) is bypassed in terms of audio-chain and CPU usage (default). <br />
				'Type I' (<b>1</b>) is a subtle classic tanh-like analog saturator. <br />
				'Type II' (<b>2</b>) is an agressive waveshaper, best used for special effects rather than clean processing. <br />
				Both Saturators are inside the EQ audio path and respond to changes in filter section Gains. <br />
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="EQ Saturation Type" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="size" get="1" set="1" type="float" size="1">
			<digest>
				Size percent of IR
			</digest>
			<description>
				Offline. Internally generates a new IR by resampling. Larger sizes have a longer time and darker sound. Smaller sizes become brighter, shorter and more focused.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Size percent of IR" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="width" get="1" set="1" type="float" size="1">
			<digest>
				Stereo width
			</digest>
			<description>
				Adjusts the stereo width of the Wet signal. With <b>0</b> percent, the wet signal is mono. With <b>100</b> percent the original image is preserved. Wet signals with wider images stand out in a mix more. Wet signals with a mono image blend into a mix more.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Stereo width" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
	</attributelist>

	<!--DISCUSSION-->
	<discussion>
		An MSP version of the original Ableton 'Convolution Reverb' device by Alex Harker, 2018 port by Pete Dowling. To explore the abstraction either right-click an instantiated abstraction and choose "Object > Open Original...", or open the original '.maxpat' from the Max Browser. After this, cmnd/ctrl-e to go into edit mode, then cmnd/ctrl-click the "View" button.
	</discussion>

	<!--SEEALSO-->
	<seealsolist>
		<seealso name="hirt.convolutionreverb~" />
		<seealso name="hirt.irmaker~" />
		<seealso name="impulseresponses" type="vignette" module="hirt" />
        <seealso name="hirttutorials" type="tutorial" module="hirt" />
		<seealso name="bufconvolve~" />
		<seealso name="bufresample~" />
		<seealso name="bufreverse~" />
		<seealso name="morphfilter~" />
		<seealso name="multiconvolve~" />
		<seealso name="spectrumdraw~" />
		<seealso name="iralign~" />
		<seealso name="iraverage~" />
		<seealso name="irextract~" />
		<seealso name="irinvert~" />
		<seealso name="irmeasure~" />
		<seealso name="irnonlin~" />
		<seealso name="irphase~" />
		<seealso name="irplapprox~" />
		<seealso name="irreference~" />
		<seealso name="irstats~" />
		<seealso name="irsweeps~" />
		<seealso name="irtransaural~" />
		<seealso name="irtrimnorm~" />
		<seealso name="iruser~" />
		<seealso name="irvalue~" />
		<seealso name="pattrstorage" />
		<seealso name="gen~" />
		<seealso name="jsui" />
	</seealsolist>

	<misc name = "Input">
		<entry name ="Inlet 1 (signal/messages)">
			<description>
				Left Audio input (and messages).
				Left Audio Signal to be convolved / Messages to <o>hirt.convolver~</o>
			</description>
		</entry>
		<entry name ="Inlet 2 (signal/messages)">
			<description>
				Right Audio input (and messages).
				Right Audio Signal to be convolved / Messages to <o>hirt.convolver~</o>
			</description>
		</entry>
	</misc>

	<misc name = "Output">
		<entry name ="Outlet 1 (signal)">
			<description>
				The Left convolved signal output.
			</description>
		</entry>
		<entry name ="Outlet 2 (signal)">
			<description>
				The Right convolved signal output.
			</description>
		</entry>
		<entry name ="Outlet 3 (anything)">
			<description>
				Multiple messages, corresponding to the various input and attribute messages above.
				A direct feed from the dumpout of the internal <o>pattrstorage</o> object. Any internal parameter can be queried and returned here, as well as current state and storage data.
			</description>
		</entry>
	</misc>

	<misc name = "Discussion">
		<entry name ="More details">
			<description>
		An MSP version of the original Ableton 'Convolution Reverb' device by Alex Harker, 2018 port by Pete Dowling. To explore the abstraction either right-click an instantiated abstraction and choose "Object > Open Original...", or open the original '.maxpat' from the Max Browser. After this, cmnd/ctrl-e to go into edit mode, then cmnd/ctrl-click the "View" button.
			</description>
		</entry>
		<entry name ="Keywords">
			<description>
impulse response, convolution, reverb, msp.
			</description>
		</entry>
	</misc>

</c74object>