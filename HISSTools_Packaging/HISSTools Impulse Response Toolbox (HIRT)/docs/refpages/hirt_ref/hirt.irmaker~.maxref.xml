<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<?xml-stylesheet href="./_c74_ref.xsl" type="text/xsl"?>

<!--This file has been sort of automatically generated by Doctor Max. DO NOT EDIT THIS FILE DIRECTLY.-->

<c74object name="hirt.irmaker~" module="hirt" kind="patcher">

	<digest>
		HIRT Impulse Response Maker - Impulse Response Measurement and Auditioning
	</digest>

	<description>
		The <o>hirt.irmaker~</o> can be used to measure the impulse responses of real spaces, software, or hardware devices, for use in <o>hirt.convolver~</o> and <o>hirt.convolutionreverb~</o> and throughout the HIRT package ecosystem and beyond. Measurements can be made using either an exponential sweep (most suitable for real spaces and analog equipment), or an impulse (most suited to measuring digital systems). Once measured, the impulse responses can be saved to disk.
	</description>

	<!--METADATA-->
	<metadatalist>
		<metadata name="author">Alex Harker</metadata>
		<metadata name="tag">HIRT</metadata>
		<metadata name="tag">HIRT Abstractions</metadata>
		<metadata name="tag">HIRT Convolution</metadata>
		<metadata name="tag">HIRT Reverb</metadata>
		<metadata name="tag">HIRT Impulse Response</metadata>
		<metadata name="tag">HIRT Measurement</metadata>
	</metadatalist>

	<!--INLETS-->
	<inletlist>
		<inlet id="0" type="INLET_TYPE">
			<digest>
				Left/Mono Audio input (and messages)
			</digest>
			<description>
				Left Audio Signal to be measured and/or auditioned / Messages to <o>hirt.irmaker~</o>
			</description>
		</inlet>
		<inlet id="1" type="INLET_TYPE">
			<digest>
				Right Audio input (and messages)
			</digest>
			<description>
				Right Audio Signal to be measured and/or auditioned / Messages to <o>hirt.irmaker~</o>
			</description>
		</inlet>
	</inletlist>

	<!--OUTLETS-->
	<outletlist>
		<outlet id="0" type="INLET_TYPE">
			<digest>
				The Left measured and/or auditioned signal output
			</digest>
			<description>
			</description>
		</outlet>
		<outlet id="1" type="INLET_TYPE">
			<digest>
				The Right measured and/or auditioned signal output
			</digest>
			<description>
			</description>
		</outlet>
		<outlet id="2" type="INLET_TYPE">
			<digest>
				<b>0..1</b> Measurement Progress signal
			</digest>
			<description>
			</description>
		</outlet>
		<outlet id="3" type="INLET_TYPE">
			<digest>
				<m>Bang</m> on completion of process
			</digest>
			<description>
			</description>
		</outlet>
	</outletlist>

	<!--ARGUMENTS-->
	<objarglist>
		<objarg name="NONE" optional="0" type="none">
			<digest>
				No arguments for <o>hirt.irmaker~</o>
			</digest>
			<description>
			</description>
		</objarg>
	</objarglist>

	<!--MESSAGES-->
	<methodlist>
		<method name="centre">
			<arglist />
			<digest>
				Audition response of Both input channels
			</digest>
			<description>
				The symbol <m>centre</m> alone auditions the response of the recorded IR to a single sample click in both input channels. <br />
				If no IR has been recorded <m>centre</m> is ignored. <br />
			</description>
		</method>
		<method name="close">
			<arglist />
			<digest>
				Close UI Window
			</digest>
			<description>
				The symbol <m>close</m> (or <m>wclose</m>) will cause the currently open UI editor window to close. <br />
			</description>
		</method>
		<method name="impulse">
			<arglist />
			<digest>
				Measure using an impulse signal
			</digest>
			<description>
				The symbol <m>impulse</m> alone measures using an impulse signal with the current settings. <br />
				The <m>impulse</m> signal is advisable for measurements within a digital system. <br />
			</description>
		</method>
		<method name="left">
			<arglist />
			<digest>
				Audition response of Left input channel
			</digest>
			<description>
				The symbol <m>left</m> alone auditions the response of the recorded IR to a single sample click in the left input channel. <br />
				If no IR has been recorded <m>left</m> is ignored. <br />
			</description>
		</method>
		<method name="open">
			<arglist />
			<digest>
				Open UI Window
			</digest>
			<description>
				The symbol <m>open</m> (or <m>front</m>) will cause the UI editor window to open. <br />
			</description>
		</method>
		<method name="right">
			<arglist />
			<digest>
				Audition response of Right input channel
			</digest>
			<description>
				The symbol <m>right</m> alone auditions the response of the recorded IR to a single sample click in the right input channel. <br />
				If no IR has been recorded <m>right</m> is ignored. <br />
			</description>
		</method>
		<method name="save">
			<arglist />
			<digest>
				Save currently recorded IR to disk
			</digest>
			<description>
				The symbol <m>save</m> alone brings up a dialog in order to name and write the currently recorded IR to disk. <br />
				If no IR has been recorded <m>save</m> is ignored. <br />
			</description>
		</method>
		<method name="settings">
			<arg name="channels" optional="0" type="int" />
			<arg name="amplitude" optional="1" type="int/float" />
			<arg name="sweeptime" optional="1" type="int/float" />
			<arg name="irlength" optional="1" type="int/float" />
			<digest>
				Set all IR Measurement parameters
			</digest>
			<description>
				Syntax: <b>settings <m>&lt;int: channels&gt;</m> <m>[&lt;int/float: amplitude&gt;]</m> <m>[&lt;int/float: sweeptime&gt;]</m> <m>[&lt;int/float: irlength&gt;]</m> </b><br />				<br />
				The message <m>settings</m> followed by a list of up to 4 atoms sets all IR Measurement parameters in one place. <br />
				<br />
				Atom 1 corresponds exactly to the <m>channels</m> attribute. <br />
				Atom 2 corresponds exactly to the <m>amplitude</m> attribute. <br />
				Atom 3 corresponds exactly to the <m>sweeptime</m> attribute. <br />
				Atom 4 corresponds exactly to the <m>irlength</m> attribute. <br />
				<br />
			</description>
		</method>
		<method name="signal">
			<arglist />
			<digest>
				In either inlet: The Audio signals to be measured and/or auditioned
			</digest>
			<description>
				In the Left inlet: The Left signal to be measured and/or auditioned. In the Right inlet: The Right signal to be measured and/or auditioned. <br />
			</description>
		</method>
		<method name="stop">
			<arglist />
			<digest>
				Stop any measurement in progress
			</digest>
			<description>
				The symbol <m>stop</m> alone cancels any <m>sweep</m> or <m>impulse</m> measurement currently in progress. <br />
				Measurement progress is available as a 0..1 signal from the far right outlet of the abstraction. <br />
			</description>
		</method>
		<method name="sweep">
			<arglist />
			<digest>
				Measure using a sweep signal
			</digest>
			<description>
				The symbol <m>sweep</m> alone measures using a sweep signal with the current settings. <br />
				The <m>sweep</m> signal is advisable for measuring analog equipment or real spaces. <br />
			</description>
		</method>
	</methodlist>

	<!--ATTRIBUTES-->
	<attributelist>
		<attribute name="amplitude" get="1" set="1" type="int" size="1">
			<digest>
				Output Amplitude of IR
			</digest>
			<description>
				Sets the output amplitude of the recorded IR. <br />
				A zero-indexed <m>integer</m> sets one of the following options: <br />
				<b>0</b> =   <b>0dB</b> <br />
				<b>1</b> =  <b>-5dB</b> <br />
				<b>2</b> = <b>-10dB</b> <br />
				<b>3</b> = <b>-15dB</b> <br />
				<b>4</b> = <b>-20dB</b> <br />
				<b>5</b> = <b>-25dB</b> <br />
				<b>6</b> = <b>-30dB</b> <br />
				A positive or negative <m>float</m> sets the <b>dB</b> value directly, always rounded to the nearest value in the list above. <br />
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Output Amplitude of IR" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="audition" get="1" set="1" type="int" size="1">
			<digest>
				Audition Mode
			</digest>
			<description>
				A <b>0</b>/<b>1</b> <b>off</b>/<b>on</b> flag allows recorded IRs to be auditioned. This may be done either by convolution with the input of <o>hirt.irmaker~</o> (see also the <m>input</m> attribute flag), or by using the <m>left</m>, <m>centre</m> or <m>right</m> messages. <br />
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Audition Mode" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="channels" get="1" set="1" type="int" size="1">
			<digest>
				IR Stereo Mode
			</digest>
			<description>
				An <m>integer</m> selects either a <b>true stereo mode</b> (<b>0</b>), or a <b>mono to stereo mode</b> (<b>1</b>). <br />
				In use, the <b>true stereo mode</b> takes two measurements one after the other (one for each input channel). This allows the stereo response of a system to be properly recreated. <br />
				Only a single measurement is required for <b>mono to stereo mode</b>, but the true stereo response is not captured in this case. <br />
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="IR Stereo Mode" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="input" get="1" set="1" type="int" size="1">
			<digest>
				Input Audition
			</digest>
			<description>
				A <b>0</b>/<b>1</b> <b>off</b>/<b>on</b> flag switches auditioning between using the <m>left</m>, <m>centre</m> &amp; <m>right</m> messages only or using the audio input of the abstraction (see also the <m>audition</m> attribute flag). <br />
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Input Audition" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="irlength" get="1" set="1" type="int" size="1">
			<digest>
				Expected IR Length in Seconds
			</digest>
			<description>
				Sets the expected IR length. If in doubt this value should be over-estimated, to avoid cropping the end of the IR. <br />
				A zero-indexed <m>integer</m> sets one of the following options: <br />
				<b>0</b> =   <b>1 second </b> <br />
				<b>1</b> =   <b>2 seconds</b> <br />
				<b>2</b> =   <b>3 seconds</b> <br />
				<b>3</b> =   <b>4 seconds</b> <br />
				<b>4</b> =   <b>5 seconds</b> <br />
				<b>5</b> = <b>7.5 seconds</b> <br />
				<b>6</b> =  <b>10 seconds</b> <br />
				<b>7</b> =  <b>15 seconds</b> <br />
				<b>8</b> =  <b>20 seconds</b> <br />
				<b>9</b> =  <b>30 seconds</b> <br />
				A <m>float</m> sets the <b>seconds</b> value directly, always rounded to the nearest value in the list above. <br />
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Expected IR Length in Seconds" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="sweeptime" get="1" set="1" type="int" size="1">
			<digest>
				IR Sweep Length in Seconds
			</digest>
			<description>
				Sets the sweep length in seconds. Longer sweeps produce higher quality results with a higher SNR. <br />
				A zero-indexed <m>integer</m> sets one of the following options: <br />
				<b>0</b> = <b>10 seconds</b> (quick measure) <br />
				<b>1</b> = <b>15 seconds</b> (low quality) <br />
				<b>2</b> = <b>20 seconds</b> (medium quality) <br />
				<b>3</b> = <b>30 seconds</b> (good quality) <br />
				<b>4</b> = <b>45 seconds</b> (high quality) <br />
				<b>5</b> = <b>60 seconds</b> (very high quality) <br />
				A <m>float</m> sets the <b>seconds</b> value directly, always rounded to the nearest value in the list above. <br />
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="IR Sweep Length in Seconds" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="tone" get="1" set="1" type="int" size="1">
			<digest>
				Test Tone Off/On
			</digest>
			<description>
				A <b>0</b>/<b>1</b> <b>off</b>/<b>on</b> flag switches test tones off/on. Use test tones to set recording levels. See also <m>tonechans</m> and <m>tonefreq</m> attributes. <br />
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Test Tone Off/On" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="tonechans" get="1" set="1" type="int" size="1">
			<digest>
				Test Tone Channel(s)
			</digest>
			<description>
				An <m>integer</m> selects which channels will output a test tone when engaged (see the <m>tone</m> attribute). <br />
				<b>0</b> = <b>Both</b> channels <br />
				<b>1</b> = <b>Left</b> channel <br />
				<b>2</b> = <b>Right</b> channel <br />
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Test Tone Channel(s)" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="tonefreq" get="1" set="1" type="int" size="1">
			<digest>
				Test Tone Frequency
			</digest>
			<description>
				Sets the test tone frequency. <br />
				A zero-indexed <m>integer</m> sets one of the following options: <br />
				<b>0</b> =  <b>32 Hz </b> <br />
				<b>1</b> =  <b>64 Hz</b> <br />
				<b>2</b> = <b>125 Hz</b> <br />
				<b>3</b> = <b>250 Hz</b> <br />
				<b>4</b> = <b>500 Hz</b> <br />
				<b>5</b> =  <b>1 kHz</b> <br />
				<b>6</b> =  <b>2 kHz</b> <br />
				<b>7</b> =  <b>4 kHz</b> <br />
				<b>8</b> =  <b>8 kHz</b> <br />
				<b>9</b> = <b>16 kHz</b> <br />
				A <m>float</m> sets the <b>Hz</b> (not kHz) value directly, always rounded to the nearest value in the list above. <br />
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Test Tone Frequency" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="trimnorm" get="1" set="1" type="int" size="1">
			<digest>
				Automatic Trimming &amp; Normalisation
			</digest>
			<description>
				A <b>0</b>/<b>1</b> <b>off</b>/<b>on</b> flag switches automatic trimming &amp; normalisation off/on. <br />
				When on, recorded IRs will be normalised and automatically trimmed when saved. Otherwise IRs are left exactly as measured. (See also the <m>save</m> message). <br />
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Automatic Trimming &amp; Normalisation" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
	</attributelist>

	<!--DISCUSSION-->
	<discussion>
		An MSP version of the original Ableton 'IR Measurement Device' by Alex Harker, 2018 port by Pete Dowling. To explore the abstraction either right-click an instantiated abstraction and choose "Object > Open Original...", or open the original '.maxpat' from the Max Browser. After this, cmnd/ctrl-e to go into edit mode, then cmnd/ctrl-click the "View" button.
	</discussion>

	<!--SEEALSO-->
	<seealsolist>
		<seealso name="hirt.convolutionreverb~" />
		<seealso name="hirt.convolver~" />
		<seealso name="impulseresponses" type="vignette" module="hirt" />
		<seealso name="iralign~" />
		<seealso name="iraverage~" />
		<seealso name="irextract~" />
		<seealso name="irinvert~" />
		<seealso name="irmeasure~" />
		<seealso name="irnonlin~" />
		<seealso name="irphase~" />
		<seealso name="irplapprox~" />
		<seealso name="irreference~" />
		<seealso name="irstats~" />
		<seealso name="irsweeps~" />
		<seealso name="irtransaural~" />
		<seealso name="irtrimnorm~" />
		<seealso name="iruser~" />
		<seealso name="irvalue~" />
		<seealso name="bufconvolve~" />
		<seealso name="bufresample~" />
		<seealso name="bufreverse~" />
		<seealso name="morphfilter~" />
		<seealso name="multiconvolve~" />
		<seealso name="spectrumdaw~" />
	</seealsolist>

	<misc name = "Input">
		<entry name ="Inlet 1 (signal/messages)">
			<description>
				Left/Mono Audio input (and messages).
				Left Audio Signal to be measured and/or auditioned / Messages to <o>hirt.irmaker~</o>
			</description>
		</entry>
		<entry name ="Inlet 2 (signal/messages)">
			<description>
				Right Audio input (and messages).
				Right Audio Signal to be measured and/or auditioned / Messages to <o>hirt.irmaker~</o>
			</description>
		</entry>
	</misc>

	<misc name = "Output">
		<entry name ="Outlet 1 (signal)">
			<description>
				The Left measured and/or auditioned signal output.
			</description>
		</entry>
		<entry name ="Outlet 2 (signal)">
			<description>
				The Right measured and/or auditioned signal output.
			</description>
		</entry>
		<entry name ="Outlet 3 (signal)">
			<description>
				<b>0..1</b> Measurement Progress signal.
			</description>
		</entry>
		<entry name ="Outlet 4 (bang)">
			<description>
				<m>Bang</m> on completion of process.
			</description>
		</entry>
	</misc>

	<misc name = "Discussion">
		<entry name ="More details">
			<description>
		An MSP version of the original Ableton 'IR Measurement Device' by Alex Harker, 2018 port by Pete Dowling. To explore the abstraction either right-click an instantiated abstraction and choose "Object > Open Original...", or open the original '.maxpat' from the Max Browser. After this, cmnd/ctrl-e to go into edit mode, then cmnd/ctrl-click the "View" button.
			</description>
		</entry>
		<entry name ="Keywords">
			<description>
impulse response, convolution, reverb, msp.
			</description>
		</entry>
	</misc>

</c74object>